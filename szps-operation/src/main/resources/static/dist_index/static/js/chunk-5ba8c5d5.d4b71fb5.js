(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ba8c5d5"],{"041b":function(e,t,r){"use strict";var a=r("b716"),n=r.n(a);n.a},"336c":function(e,t,r){"use strict";var a=r("72bb"),n=r.n(a);n.a},"72bb":function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-form"},[r("div",{staticClass:"content-box"},[e._m(0),r("div",{staticClass:"right"},[r("div",{staticClass:"right-box"},[r("div",{staticClass:"my-row",staticStyle:{"margin-left":"40px","margin-right":"40px","margin-top":"60px"}},[r("span",{staticClass:"title"},[e._v(e._s(e.applicationTitle))])]),r("div",{staticClass:"my-row",staticStyle:{"margin-top":"30px"}},[r("span",{staticClass:"hr hr-left"}),r("span",{staticClass:"hr hr-right"}),r("span",{staticClass:"subtitle"},[e._v("欢迎登录"+e._s(e.applicationTitle))])]),r("div",{staticClass:"my-row",staticStyle:{"margin-top":"20px"}},[r("div",{staticClass:"inputItem"},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.param.username,expression:"param.username"}],ref:"username",attrs:{readonly:"",placeholder:"请输入账号",autocomplete:"false"},domProps:{value:e.param.username},on:{input:function(t){t.target.composing||e.$set(e.param,"username",t.target.value)}}})])]),r("div",{staticClass:"my-row",staticStyle:{"margin-top":"30px"}},[r("div",{staticClass:"inputItem"},[e._m(2),r("input",{directives:[{name:"model",rawName:"v-model",value:e.param.password,expression:"param.password"}],ref:"password",attrs:{readonly:"",placeholder:"请输入密码",autocomplete:"false",type:"password"},domProps:{value:e.param.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)},input:function(t){t.target.composing||e.$set(e.param,"password",t.target.value)}}})])]),r("div",{staticClass:"my-row",staticStyle:{"margin-top":"20px"}},[r("el-checkbox",{model:{value:e.remPwd,callback:function(t){e.remPwd=t},expression:"remPwd"}},[e._v("记住密码")])],1),r("div",{staticClass:"my-row"},[r("div",{staticClass:"btnSubmit",on:{click:e.handleLogin}},[r("span",[e._v("登录")])])])])])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"left"},[r("img",{attrs:{src:"/img-portal/login-left.png"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"icon icon-user"})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("i",{staticClass:"icon icon-lock"})])}],s=(r("a44f"),r("dbde"),r("7470"),r("a037"),r("5f87"),{data:function(){return{param:{username:"",password:""},redirect:void 0,otherQuery:{},loading:!1,remPwd:!1,applicationTitle:document.title}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},mounted:function(){var e=this;this.$nextTick((function(){e.initAuth()}))},methods:{initAuth:function(){var e=this;setTimeout((function(){e.$refs.username.removeAttribute("readonly"),e.$refs.password.removeAttribute("readonly"),localStorage.getItem("remember")?(e.remPwd=!0,e.param.username=localStorage.getItem("username"),e.param.password=localStorage.getItem("password")):(e.remPwd=!1,e.param.username="",e.param.password="")}),1e3)},handleLogin:function(){var e=this;this.loading=!0,this.$store.dispatch("user/login",this.param).then((function(){console.log("login "),sessionStorage.setItem("role",e.param.username),sessionStorage.setItem("username",e.param.username),sessionStorage.setItem("password",e.param.password),e.loading=!1;var t=!0;if(e.redirect&&!e.redirect.startsWith("/")){var r=window.location.host;-1===e.redirect.indexOf(r)&&(t=!1)}console.log("isSameOrigin",t),t&&e.$router.push({path:e.redirect||"/",query:e.otherQuery}),e.remPwd?(localStorage.setItem("remember","true"),localStorage.setItem("username",e.param.username),localStorage.setItem("password",e.param.password),localStorage.setItem("expired",(new Date).valueOf)):(localStorage.removeItem("remember"),localStorage.removeItem("username"),localStorage.removeItem("password"),localStorage.removeItem("expired"))})).catch((function(t){if(e.loading=!1,t.response&&t.response.data){var r="登录失败";"invalid_grant"===t.response.data.error?r="无效的用户或密码":console.log(t.response.data),e.$message({message:r,type:"error"})}else console.log(t.message),e.$message({message:t.message,type:"error"})}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,r){return"redirect"!==r&&(t[r]=e[r]),t}),{})}}}),o=s,i=(r("041b"),r("336c"),r("4023")),c=Object(i["a"])(o,a,n,!1,null,"5b16b82b",null);t["default"]=c.exports},a037:function(e,t,r){(function(e){(function(e){"use strict";var t=e.URLSearchParams&&e.URLSearchParams.prototype.get?e.URLSearchParams:null,r=t&&"a=1"===new t({a:1}).toString(),a=t&&"+"===new t("s=%2B").get("s"),n="__URLSearchParams__",s=!t||function(){var e=new t;return e.append("s"," &"),"s=+%26"===e.toString()}(),o=m.prototype,i=!(!e.Symbol||!e.Symbol.iterator);if(!(t&&r&&a&&s)){o.append=function(e,t){g(this[n],e,t)},o["delete"]=function(e){delete this[n][e]},o.get=function(e){var t=this[n];return e in t?t[e][0]:null},o.getAll=function(e){var t=this[n];return e in t?t[e].slice(0):[]},o.has=function(e){return e in this[n]},o.set=function(e,t){this[n][e]=[""+t]},o.toString=function(){var e,t,r,a,s=this[n],o=[];for(t in s)for(r=p(t),e=0,a=s[t];e<a.length;e++)o.push(r+"="+p(a[e]));return o.join("&")};var c=!a,l=!c&&t&&!r&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:l?new Proxy(t,{construct:function(e,t){return new e(new m(t[0]).toString())}}):m});var u=e.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(e,t){var r=h(this.toString());Object.getOwnPropertyNames(r).forEach((function(a){r[a].forEach((function(r){e.call(t,r,a,this)}),this)}),this)},u.sort=u.sort||function(){var e,t,r,a=h(this.toString()),n=[];for(e in a)n.push(e);for(n.sort(),t=0;t<n.length;t++)this["delete"](n[t]);for(t=0;t<n.length;t++){var s=n[t],o=a[s];for(r=0;r<o.length;r++)this.append(s,o[r])}},u.keys=u.keys||function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},u.values=u.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},u.entries=u.entries||function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},i&&(u[e.Symbol.iterator]=u[e.Symbol.iterator]||u.entries)}function m(e){e=e||"",(e instanceof URLSearchParams||e instanceof m)&&(e=e.toString()),this[n]=h(e)}function p(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function d(e){return decodeURIComponent(e.replace(/\+/g," "))}function f(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(r[e.Symbol.iterator]=function(){return r}),r}function h(e){var t={};if("object"===typeof e)for(var r in e)e.hasOwnProperty(r)&&g(t,r,e[r]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var a=e.split("&"),n=0;n<a.length;n++){var s=a[n],o=s.indexOf("=");-1<o?g(t,d(s.slice(0,o)),d(s.slice(o+1))):s&&g(t,d(s),"")}}return t}function g(e,t,r){var a="string"===typeof r?r:null!==r&&void 0!==r&&"function"===typeof r.toString?r.toString():JSON.stringify(r);t in e?e[t].push(a):e[t]=[a]}})("undefined"!==typeof e?e:"undefined"!==typeof window?window:this)}).call(this,r("9edd"))},b716:function(e,t,r){}}]);
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.szps.web.mapper.supervise.TbStaffMapper" >
  <resultMap id="BaseResultMap" type="com.szps.web.domain.supervise.TbStaff" >
    <id column="STAFF_NUMBER" property="staffNumber" jdbcType="VARCHAR" />
    <result column="STAFF_NAME" property="staffName" jdbcType="VARCHAR" />
    <result column="STAFF_BIRTHDAY" property="staffBirthday" jdbcType="VARCHAR" />
    <result column="STAFF_GENDER" property="staffGender" jdbcType="VARCHAR" />
    <result column="STAFF_TELEPHONE" property="staffTelephone" jdbcType="VARCHAR" />
    <result column="STAFF_POST" property="staffPost" jdbcType="VARCHAR" />
    <result column="STAFF_DEPT" property="staffDept" jdbcType="VARCHAR" />
    <result column="STAFF_W" property="staffW" jdbcType="DECIMAL" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from TB_STAFF
    where STAFF_NUMBER = #{staffNumber,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.szps.web.domain.supervise.TbStaff" >
    insert into TB_STAFF (STAFF_NUMBER, STAFF_NAME, STAFF_BIRTHDAY, 
      STAFF_GENDER, STAFF_TELEPHONE, STAFF_POST, 
      STAFF_DEPT, STAFF_W)
    values (#{staffNumber,jdbcType=VARCHAR}, #{staffName,jdbcType=VARCHAR}, #{staffBirthday,jdbcType=VARCHAR},
      #{staffGender,jdbcType=VARCHAR}, #{staffTelephone,jdbcType=VARCHAR}, #{staffPost,jdbcType=VARCHAR}, 
      #{staffDept,jdbcType=VARCHAR}, #{staffW,jdbcType=DECIMAL})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.szps.web.domain.supervise.TbStaff" >
    update TB_STAFF
    set STAFF_NAME = #{staffName,jdbcType=VARCHAR},
      STAFF_BIRTHDAY = #{staffBirthday,jdbcType=VARCHAR},
      STAFF_GENDER = #{staffGender,jdbcType=VARCHAR},
      STAFF_TELEPHONE = #{staffTelephone,jdbcType=VARCHAR},
      STAFF_POST = #{staffPost,jdbcType=VARCHAR},
      STAFF_DEPT = #{staffDept,jdbcType=VARCHAR},
      STAFF_W = #{staffW,jdbcType=DECIMAL}
    where STAFF_NUMBER = #{staffNumber,jdbcType=VARCHAR}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select STAFF_NUMBER, STAFF_NAME, STAFF_BIRTHDAY, STAFF_GENDER, STAFF_TELEPHONE, STAFF_POST, 
    STAFF_DEPT, STAFF_W
    from TB_STAFF
    where STAFF_NUMBER = #{staffNumber,jdbcType=VARCHAR}
  </select>

  <select id="selectStaffByStaffName" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select STAFF_NUMBER, STAFF_NAME, STAFF_BIRTHDAY, STAFF_GENDER, STAFF_TELEPHONE, STAFF_POST,
    STAFF_DEPT, STAFF_W
    from TB_STAFF
    where  STAFF_NAME= #{staffName,jdbcType=VARCHAR}
  </select>



  <select id="selectStaff" resultMap="BaseResultMap">
    select * from (select * from TB_STAFF WHERE STAFF_W=(select MAX(STAFF_W) from TB_STAFF ) order by dbms_random.value) where rownum &lt;=1
  </select>

  <select id="selectAll" resultMap="BaseResultMap" >
    select STAFF_NUMBER, STAFF_NAME, STAFF_BIRTHDAY, STAFF_GENDER, STAFF_TELEPHONE, STAFF_POST, 
    STAFF_DEPT, STAFF_W
    from TB_STAFF
  </select>

  <select id="selectStaffList" parameterType="com.szps.web.domain.supervise.TbStaff" resultMap="BaseResultMap">
    select STAFF_NUMBER, STAFF_NAME, STAFF_BIRTHDAY, STAFF_GENDER, STAFF_TELEPHONE, STAFF_POST,
    STAFF_DEPT, STAFF_W
    from TB_STAFF

    <where>
    <if test="staffName != null and staffName != ''">
       TB_STAFF.STAFF_NAME like concat(concat('%',#{staffName}),'%')
    </if>
    <if test="staffDept != null and staffDept != ''">
      AND TB_STAFF.STAFF_DEPT = #{staffDept}
    </if>
      <if test="staffBirthday != null and staffBirthday != ''">
        and TB_STAFF.STAFF_BIRTHDAY = #{staffBirthday}
      </if>
    </where>
  </select>


  <delete id="deleteUserByIds" parameterType="Long">
    delete from  TB_STAFF where STAFF_NUMBER in
    <foreach collection="array" item="staffNumber" open="(" separator="," close=")">
      #{staffNumber}
    </foreach>
  </delete>

  <select id="CheckdStaff" parameterType="String" resultType="int">
    select count(1) from TB_STAFF where TB_STAFF.STAFF_NUMBER=#{staffNumber}
  </select>
</mapper>